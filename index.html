<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Responsive Rive Animation</title>
        <style>
body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100dvh;
    font-size: 0px;
    font-family: Arial, sans-serif;
    overflow: hidden;
    /* Add iOS-specific optimizations */
    -webkit-overflow-scrolling: touch;
    -webkit-tap-highlight-color: transparent;
}

canvas {
    width: 100dvw;
    height: 100dvh;
    display: block;
    /* Add hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
}
</style>
        <script src="https://unpkg.com/@rive-app/canvas@latest"></script>
    </head>
    <body>
        <canvas id="riveCanvas"></canvas>
        <div id="widthDisplay"></div>
        <script>
    let riveInstance, widthNumInput;

    // Debounce the resize handler for better performance
    function debounce(func, wait = 100) {
        let timeout;
        return () => {
            clearTimeout(timeout);
            timeout = setTimeout(() => func(), wait);
        };
    }

    const updateCanvasSize = debounce(() => {
        const browserWidth = window.innerWidth;
        const widthDisplay = document.getElementById('widthDisplay');
        
        widthDisplay.innerText = browserWidth + ' px';

        if (widthNumInput) {
            widthNumInput.value = browserWidth;
        }

        if (riveInstance) {
            riveInstance.resizeDrawingSurfaceToCanvas();
        }
    });

    // Initialize Rive with lower quality settings for better performance
    riveInstance = new rive.Rive({
        src: 'website.riv',
        canvas: document.getElementById('riveCanvas'),
        autoplay: true,
        artboard: 'Artboard',
        stateMachines: 'State Machine 1',
        fit: rive.Fit.Cover,
        useOffscreenRenderer: true, // Better performance for complex animations
        lowQuality: true, // Reduces render quality for better performance
        onLoad: () => {
            const inputs = riveInstance.stateMachineInputs('State Machine 1');
            widthNumInput = inputs.find(i => i.name === 'Button Number');
            riveInstance.resizeDrawingSurfaceToCanvas();

            updateCanvasSize();
            window.addEventListener('resize', updateCanvasSize, { passive: true });
        }
    });
</script>
    </body>
</html>